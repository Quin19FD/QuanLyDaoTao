<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Chương Trình Khung CNTT</title>
    <style>
        *{
         font-size: 20px;
        }
        body {
            font-size: 20px;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 90%px;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
             font-size: 30px;
            color: #ff8c66;
            text-align: center;
            margin-bottom: 10px;
        }

        p {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            font-size: 18px;
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #ff8c66;
            color: white;
        }

        td {
            background-color: #fff7f2;
        }

        button {

            font-size: 20px;
            padding: 15px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
        }

        .add-btn {
            background-color: #ff8c66;
            color: white;
            margin-bottom: 20px;
        }

        .view-btn {
            background-color: #4CAF50;
            color: white;
        }

        .edit-btn {
            background-color: #FFC107;
            color: white;
        }

        .delete-btn {
            background-color: #F44336;
            color: white;
        }

        .save-btn {
            background-color: #4CAF50;
            color: white;
            margin-top: 20px;
        }

        .cancel-btn {
            background-color: #ccc;
            color: white;
            margin-top: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 60%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        input {
            padding: 5px;
            width: 60px;
            margin: 0 5px;
        }

        select {
            padding: 5px;
            width: 200px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
<div class="container">
    <h1>QUẢN LÝ CHƯƠNG TRÌNH KHUNG NGÀNH CNTT (ADMIN)</h1>
    <button class="add-btn" onclick="openAddModal()">+ Thêm CTKhung Mới</button>
    <table id="programTable">
        <thead>
        <tr>
            <th>TT</th>
            <th>MÃ NGÀNH</th>
            <th>NGÀNH</th>
            <th>NIÊN KHÓA</th>
            <th>THAO TÁC</th>
        </tr>
        </thead>
        <tbody id="programTableBody"></tbody>
    </table>
</div>

<!-- Modal for Viewing Details -->
<div id="viewModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('viewModal')">×</span>
        <h2>Chi Tiết Chương Trình Khung</h2>
        <table id="detailTable">
            <thead>
            <tr>
                <th colspan="3">Các Khối Kiến Thức</th>
            </tr>
            <tr>
                <th></th>
                <th>Số tín chỉ Bắt buộc</th>
                <th>Số tín chỉ Tự chọn</th>
            </tr>
            </thead>
            <tbody id="detailTableBody"></tbody>
        </table>
    </div>
</div>

<!-- Modal for Editing -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('editModal')">×</span>
        <h2>Sửa Chương Trình Khung</h2>
        <table id="editTable">
            <thead>
            <tr>
                <th colspan="3">Các Khối Kiến Thức</th>
            </tr>
            <tr>
                <th></th>
                <th>Số tín chỉ Bắt buộc</th>
                <th>Số tín chỉ Tự chọn</th>
            </tr>
            </thead>
            <tbody id="editTableBody"></tbody>
        </table>
        <button class="save-btn" onclick="saveEdit()">Hoàn Thành</button>
    </div>
</div>

<!-- Modal for Adding New Program -->
<div id="addModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('addModal')">×</span>
        <h2>Thêm Chương Trình Khung Mới</h2>
        <div id="selectMajor">
            <label for="majorSelect">Chọn Ngành CNTT:</label>
            <select id="majorSelect">
                <option value="">-- Chọn ngành --</option>
                <option value="7480201">Công nghệ Thông tin</option>
                <option value="7480201CLC">Công nghệ Thông tin (Chất lượng cao)</option>
            </select>
            <label for="yearSelect">Chọn Niên Khóa:</label>
            <select id="yearSelect" onchange="showAddForm()">
                <option value="">-- Chọn niên khóa --</option>
                <option value="2021-2025">2021-2025</option>
                <option value="2022-2026">2022-2026</option>
                <option value="2023-2027">2023-2027</option>
                <option value="2024-2028">2024-2028</option>
            </select>
        </div>
        <div id="addForm" style="display: none;">
            <table id="addTable">
                <thead>
                <tr>
                    <th colspan="3">Các Khối Kiến Thức</th>
                </tr>
                <tr>
                    <th></th>
                    <th>Số tín chỉ Bắt buộc</th>
                    <th>Số tín chỉ Tự chọn</th>
                </tr>
                </thead>
                <tbody id="addTableBody"></tbody>
            </table>
            <button class="save-btn" onclick="saveNewProgram()">Thêm</button>
        </div>
    </div>
</div>

<!-- Modal for Delete Confirmation -->
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('deleteModal')">×</span>
        <h2>Xác Nhận Xóa</h2>
        <p>Bạn có chắc chắn muốn xóa chương trình khung ngành <span id="deleteMajorName"></span> không?</p>
        <button class="delete-btn" onclick="confirmDelete()">Xóa</button>
        <button class="cancel-btn" onclick="closeModal('deleteModal')">Hủy</button>
    </div>
</div>

<script>
    // Mock data for CNTT programs
    let programs = [
        {
            id: "7480201",
            name: "Công nghệ Thông tin",
            year: "2021-2025",
            details: [
                { category: "Khối kiến thức giáo dục đại cương", mandatory: 34, elective: 0 },
                { category: "Kiến thức Giáo dục thế chất và Giáo dục quốc phòng và an ninh", mandatory: 12, elective: 2 },
                { category: "Kiến thức Ngôn ngữ", mandatory: 9, elective: 0 },
                { category: "Kiến thức Lý luận chính trị", mandatory: 11, elective: 0 },
                { category: "Kiến thức giáo dục đại cương khác", mandatory: 14, elective: 0 },
                { category: "Khối kiến thức giáo dục chuyên nghiệp", mandatory: 90, elective: 31 },
                { category: "Kiến thức cơ sở của ngành", mandatory: 37, elective: 0 },
                { category: "Kiến thức ngành", mandatory: 37, elective: 16 },
                { category: "Kiến thức chuyên ngành (nếu có)", mandatory: 16, elective: 15 }
            ]
        },
        {
            id: "7480201",
            name: "Công nghệ Thông tin",
            year: "2022-2026",
            details: [
                { category: "Khối kiến thức giáo dục đại cương", mandatory: 34, elective: 0 },
                { category: "Kiến thức Giáo dục thế chất và Giáo dục quốc phòng và an ninh", mandatory: 12, elective: 2 },
                { category: "Kiến thức Ngôn ngữ", mandatory: 9, elective: 0 },
                { category: "Kiến thức Lý luận chính trị", mandatory: 11, elective: 0 },
                { category: "Kiến thức giáo dục đại cương khác", mandatory: 14, elective: 0 },
                { category: "Khối kiến thức giáo dục chuyên nghiệp", mandatory: 92, elective: 31 },
                { category: "Kiến thức cơ sở của ngành", mandatory: 38, elective: 0 },
                { category: "Kiến thức ngành", mandatory: 38, elective: 16 },
                { category: "Kiến thức chuyên ngành (nếu có)", mandatory: 16, elective: 15 }
            ]
        },
        {
            id: "7480201CLC",
            name: "Công nghệ Thông tin (Chất lượng cao)",
            year: "2023-2027",
            details: [
                { category: "Khối kiến thức giáo dục đại cương", mandatory: 34, elective: 0 },
                { category: "Kiến thức Giáo dục thế chất và Giáo dục quốc phòng và an ninh", mandatory: 12, elective: 2 },
                { category: "Kiến thức Ngôn ngữ", mandatory: 9, elective: 0 },
                { category: "Kiến thức Lý luận chính trị", mandatory: 11, elective: 0 },
                { category: "Kiến thức giáo dục đại cương khác", mandatory: 14, elective: 0 },
                { category: "Khối kiến thức giáo dục chuyên nghiệp", mandatory: 95, elective: 35 },
                { category: "Kiến thức cơ sở của ngành", mandatory: 40, elective: 0 },
                { category: "Kiến thức ngành", mandatory: 40, elective: 20 },
                { category: "Kiến thức chuyên ngành (nếu có)", mandatory: 15, elective: 15 }
            ]
        }
    ];

    // Load programs into the table
    function loadPrograms() {
        const tableBody = document.getElementById("programTableBody");
        tableBody.innerHTML = "";
        programs.forEach((program, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${program.id}</td>
                <td>${program.name}</td>
                <td>${program.year}</td>
                <td>
                    <button class="view-btn" onclick="viewDetails(${index})">Xem chi tiết</button>
                    <button class="edit-btn" onclick="editProgram(${index})">Sửa</button>
                    <button class="delete-btn" onclick="openDeleteModal(${index})">Xóa</button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    // View program details
    function viewDetails(index) {
        const program = programs[index];
        const detailTableBody = document.getElementById("detailTableBody");
        detailTableBody.innerHTML = "";
        let totalMandatory = 0, totalElective = 0;

        program.details.forEach((detail) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${detail.category}</td>
                <td>${detail.mandatory}</td>
                <td>${detail.elective}</td>
            `;
            detailTableBody.appendChild(row);
            totalMandatory += detail.mandatory;
            totalElective += detail.elective;
        });

        const totalRow = document.createElement("tr");
        totalRow.innerHTML = `
            <td><strong>Tổng</strong></td>
            <td><strong>${totalMandatory}</strong></td>
            <td><strong>${totalElective}</strong></td>
        `;
        detailTableBody.appendChild(totalRow);

        const footerRow = document.createElement("tr");
        const excludedCredits = program.details.find(detail => detail.category === "Kiến thức Giáo dục thế chất và Giáo dục quốc phòng và an ninh").mandatory;
        footerRow.innerHTML = `
            <td colspan="3"><em>(Không tính số tín chỉ Giáo dục thể chất và Giáo dục quốc phòng và an ninh)</em> ${totalMandatory + totalElective - excludedCredits}</td>
        `;
        detailTableBody.appendChild(footerRow);

        document.getElementById("viewModal").style.display = "block";
    }

    // Edit program
    let currentEditIndex = null;
    function editProgram(index) {
        currentEditIndex = index;
        const program = programs[index];
        const editTableBody = document.getElementById("editTableBody");
        editTableBody.innerHTML = "";

        program.details.forEach((detail, i) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${detail.category}</td>
                <td><input type="number" value="${detail.mandatory}" id="mandatory-${i}"></td>
                <td><input type="number" value="${detail.elective}" id="elective-${i}"></td>
            `;
            editTableBody.appendChild(row);
        });

        document.getElementById("editModal").style.display = "block";
    }

    function saveEdit() {
        const program = programs[currentEditIndex];
        program.details.forEach((detail, i) => {
            detail.mandatory = parseInt(document.getElementById(`mandatory-${i}`).value);
            detail.elective = parseInt(document.getElementById(`elective-${i}`).value);
        });
        closeModal("editModal");
        loadPrograms();
    }

    // Delete program
    let currentDeleteIndex = null;
    function openDeleteModal(index) {
        currentDeleteIndex = index;
        document.getElementById("deleteMajorName").textContent = `${programs[index].name} (${programs[index].year})`;
        document.getElementById("deleteModal").style.display = "block";
    }

    function confirmDelete() {
        programs.splice(currentDeleteIndex, 1);
        closeModal("deleteModal");
        loadPrograms();
    }

    // Add new program
    function openAddModal() {
        document.getElementById("addModal").style.display = "block";
        document.getElementById("addForm").style.display = "none";
    }

    function showAddForm() {
        const majorSelect = document.getElementById("majorSelect");
        const yearSelect = document.getElementById("yearSelect");
        if (majorSelect.value && yearSelect.value) {
            document.getElementById("selectMajor").style.display = "none";
            document.getElementById("addForm").style.display = "block";

            const addTableBody = document.getElementById("addTableBody");
            addTableBody.innerHTML = "";
            const categories = [
                "Khối kiến thức giáo dục đại cương",
                "Kiến thức Giáo dục thế chất và Giáo dục quốc phòng và an ninh",
                "Kiến thức Ngôn ngữ",
                "Kiến thức Lý luận chính trị",
                "Kiến thức giáo dục đại cương khác",
                "Khối kiến thức giáo dục chuyên nghiệp",
                "Kiến thức cơ sở của ngành",
                "Kiến thức ngành",
                "Kiến thức chuyên ngành (nếu có)"
            ];

            categories.forEach((category, i) => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${category}</td>
                    <td><input type="number" value="0" id="add-mandatory-${i}"></td>
                    <td><input type="number" value="0" id="add-elective-${i}"></td>
                `;
                addTableBody.appendChild(row);
            });
        }
    }

    function saveNewProgram() {
        const majorSelect = document.getElementById("majorSelect");
        const yearSelect = document.getElementById("yearSelect");
        const majorId = majorSelect.value;
        const majorName = majorSelect.options[majorSelect.selectedIndex].text;
        const year = yearSelect.value;

        const newDetails = [];
        for (let i = 0; i < 9; i++) {
            const mandatory = parseInt(document.getElementById(`add-mandatory-${i}`).value);
            const elective = parseInt(document.getElementById(`add-elective-${i}`).value);
            newDetails.push({
                category: document.getElementById("addTableBody").children[i].cells[0].textContent,
                mandatory: mandatory,
                elective: elective
            });
        }

        programs.push({
            id: majorId,
            name: majorName,
            year: year,
            details: newDetails
        });

        closeModal("addModal");
        loadPrograms();
    }

    // Close modal
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
        if (modalId === "addModal") {
            document.getElementById("selectMajor").style.display = "block";
            document.getElementById("addForm").style.display = "none";
        }
    }

    // Load programs on page load
    window.onload = loadPrograms;
</script>
</body>
</html>