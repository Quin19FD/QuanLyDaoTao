<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản Lý Phân Công Giảng Dạy</title>
    <style>
        *{
            font-size: 20px;
        }
        body {
            font-size: 20px;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }

        .container {
            max-width: 90%;
            margin: 0 auto;
            background-color: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 30px;
            color: #ff8c66;
            text-align: center;
            margin-bottom: 10px;
        }

        p {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        th, td {
            font-size: 18px;
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #ff8c66;
            color: white;
        }

        td {
            background-color: #fff7f2;
        }

        button {
            font-size: 20px;
            padding: 15px 15px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 5px;
        }

        .add-btn {
            background-color: #ff8c66;
            color: white;
            margin-bottom: 20px;
        }

        .view-btn {
            background-color: #4CAF50;
            color: white;
        }

        .edit-btn {
            background-color: #FFC107;
            color: white;
        }

        .delete-btn {
            background-color: #F44336;
            color: white;
        }

        .save-btn {
            background-color: #4CAF50;
            color: white;
            margin-top: 20px;
        }

        .cancel-btn {
            background-color: #ccc;
            color: white;
            margin-top: 20px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal-content {
            background-color: #fff;
            margin: 10% auto;
            padding: 20px;
            border-radius: 10px;
            width: 60%;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        input, select {
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
        }

        .search-box {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }

        .search-box input {
            flex: 1;
            padding: 10px;
        }

        .search-box button {
            padding: 10px 15px;
            background-color: #ff8c66;
            color: white;
        }

        .filter-box {
            display: flex;
            margin-bottom: 20px;
            gap: 10px;
        }

        .filter-box select {
            flex: 1;
            padding: 10px;
        }
    </style>
</head>

<body>
<div class="container">
    <h1>QUẢN LÝ PHÂN CÔNG GIẢNG DẠY</h1>
    
    <div class="search-box">
        <input type="text" id="searchInput" placeholder="Tìm kiếm theo mã hoặc tên giảng viên...">
        <button onclick="searchAssignments()">Tìm kiếm</button>
    </div>
    
    <div class="filter-box">
        <select id="semesterFilter" onchange="filterAssignments()">
            <option value="">-- Lọc theo học kỳ --</option>
            <option value="1">Học kỳ 1</option>
            <option value="2">Học kỳ 2</option>
        </select>
        <select id="departmentFilter" onchange="filterAssignments()">
            <option value="">-- Lọc theo bộ môn --</option>
            <option value="CNPM">Công nghệ phần mềm</option>
            <option value="HTTT">Hệ thống thông tin</option>
            <option value="MMT">Mạng máy tính</option>
        </select>
    </div>
    
    <button class="add-btn" onclick="openAddModal()">+ Thêm Phân Công Mới</button>
    
    <table id="assignmentTable">
        <thead>
        <tr>
            <th>TT</th>
            <th>Mã CB</th>
            <th>Họ và tên GV</th>
            <th>Năm sinh</th>
            <th>Chức danh, học vị</th>
            <th>Tên học phần</th>
            <th>Mã học phần</th>
            <th>Số TC</th>
            <th>Số tiết HP</th>
            <th>Số lượng nhóm</th>
            <th>Học kì</th>
            <th>Tổng tiết GD</th>
            <th>Thao tác</th>
        </tr>
        </thead>
        <tbody id="assignmentTableBody">
            <!-- Dữ liệu sẽ được thêm bằng JavaScript -->
        </tbody>
    </table>
</div>

<!-- Modal for Adding New Assignment -->
<div id="addModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('addModal')">&times;</span>
        <h2>Thêm Phân Công Mới</h2>
        <form id="addForm">
            <div>
                <label for="teacherId">Mã CB:</label>
                <input type="text" id="teacherId" required>
            </div>
            <div>
                <label for="teacherName">Họ tên GV:</label>
                <input type="text" id="teacherName" required>
            </div>
            <div>
                <label for="birthYear">Năm sinh:</label>
                <input type="number" id="birthYear" required>
            </div>
            <div>
                <label for="degree">Chức danh, học vị:</label>
                <input type="text" id="degree" required>
            </div>
            <div>
                <label for="courseName">Tên học phần:</label>
                <input type="text" id="courseName" required>
            </div>
            <div>
                <label for="courseId">Mã học phần:</label>
                <input type="text" id="courseId" required>
            </div>
            <div>
                <label for="credits">Số TC:</label>
                <input type="number" id="credits" required>
            </div>
            <div>
                <label for="hours">Số tiết HP:</label>
                <input type="number" id="hours" required>
            </div>
            <div>
                <label for="groups">Số lượng nhóm:</label>
                <input type="number" id="groups" required>
            </div>
            <div>
                <label for="semester">Học kì:</label>
                <select id="semester" required>
                    <option value="1">Học kỳ 1</option>
                    <option value="2">Học kỳ 2</option>
                </select>
            </div>
            <div>
                <label for="department">Bộ môn:</label>
                <select id="department" required>
                    <option value="CNPM">Công nghệ phần mềm</option>
                    <option value="HTTT">Hệ thống thông tin</option>
                    <option value="MMT">Mạng máy tính</option>
                </select>
            </div>
            <button type="button" class="save-btn" onclick="saveNewAssignment()">Thêm</button>
        </form>
    </div>
</div>

<!-- Modal for Editing Assignment -->
<div id="editModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('editModal')">&times;</span>
        <h2>Sửa Phân Công</h2>
        <form id="editForm">
            <input type="hidden" id="editIndex">
            <div>
                <label for="editTeacherId">Mã CB:</label>
                <input type="text" id="editTeacherId" readonly>
            </div>
            <div>
                <label for="editTeacherName">Họ tên GV:</label>
                <input type="text" id="editTeacherName" readonly>
            </div>
            <div>
                <label for="editCourseName">Tên học phần:</label>
                <input type="text" id="editCourseName" required>
            </div>
            <div>
                <label for="editCourseId">Mã học phần:</label>
                <input type="text" id="editCourseId" required>
            </div>
            <div>
                <label for="editCredits">Số TC:</label>
                <input type="number" id="editCredits" required>
            </div>
            <div>
                <label for="editHours">Số tiết HP:</label>
                <input type="number" id="editHours" required>
            </div>
            <div>
                <label for="editGroups">Số lượng nhóm:</label>
                <input type="number" id="editGroups" required>
            </div>
            <div>
                <label for="editSemester">Học kì:</label>
                <select id="editSemester" required>
                    <option value="1">Học kỳ 1</option>
                    <option value="2">Học kỳ 2</option>
                </select>
            </div>
            <button type="button" class="save-btn" onclick="saveEdit()">Lưu thay đổi</button>
        </form>
    </div>
</div>

<!-- Modal for Delete Confirmation -->
<div id="deleteModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('deleteModal')">&times;</span>
        <h2>Xác Nhận Xóa</h2>
        <p>Bạn có chắc chắn muốn xóa phân công này không?</p>
        <input type="hidden" id="deleteIndex">
        <button class="delete-btn" onclick="confirmDelete()">Xóa</button>
        <button class="cancel-btn" onclick="closeModal('deleteModal')">Hủy</button>
    </div>
</div>

<!-- Modal for Viewing Details -->
<div id="viewModal" class="modal">
    <div class="modal-content">
        <span class="close" onclick="closeModal('viewModal')">&times;</span>
        <h2>Chi Tiết Phân Công</h2>
        <div id="viewDetails"></div>
    </div>
</div>

<script>
    // Dữ liệu mẫu
    let assignments = [
        {
            id: 1,
            teacherId: "GV01",
            teacherName: "Nguyễn Văn A",
            birthYear: 1980,
            degree: "TS, Giảng viên chính",
            courseName: "CTDL & GT",
            courseId: "CS101",
            credits: 3,
            hours: 45,
            groups: 2,
            semester: "1",
            totalHours: 90,
            department: "CNPM"
        },
        {
            id: 2,
            teacherId: "GV02",
            teacherName: "Trần Thị B",
            birthYear: 1985,
            degree: "ThS, Giảng viên",
            courseName: "OOP",
            courseId: "CS102",
            credits: 3,
            hours: 45,
            groups: 2,
            semester: "2",
            totalHours: 90,
            department: "CNPM"
        },
        {
            id: 3,
            teacherId: "GV03",
            teacherName: "Lê Văn C",
            birthYear: 1978,
            degree: "TS, Phó trưởng khoa",
            courseName: "Web Design",
            courseId: "CS103",
            credits: 3,
            hours: 45,
            groups: 2,
            semester: "1",
            totalHours: 90,
            department: "HTTT"
        },
        {
            id: 4,
            teacherId: "GV04",
            teacherName: "Phạm Thị D",
            birthYear: 1990,
            degree: "CN, Trợ giảng",
            courseName: "Mạng máy tính",
            courseId: "CS104",
            credits: 2,
            hours: 30,
            groups: 1,
            semester: "2",
            totalHours: 45,
            department: "MMT"
        }
    ];

    // Hiển thị danh sách phân công
    function renderAssignments(data = assignments) {
        const tableBody = document.getElementById("assignmentTableBody");
        tableBody.innerHTML = "";
        
        data.forEach((assignment, index) => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${index + 1}</td>
                <td>${assignment.teacherId}</td>
                <td>${assignment.teacherName}</td>
                <td>${assignment.birthYear}</td>
                <td>${assignment.degree}</td>
                <td>${assignment.courseName}</td>
                <td>${assignment.courseId}</td>
                <td>${assignment.credits}</td>
                <td>${assignment.hours}</td>
                <td>${assignment.groups}</td>
                <td>${assignment.semester}</td>
                <td>${assignment.totalHours}</td>
                <td>
                    <button class="view-btn" onclick="viewAssignment(${index})">Xem</button>
                    <button class="edit-btn" onclick="editAssignment(${index})">Sửa</button>
                    <button class="delete-btn" onclick="openDeleteModal(${index})">Xóa</button>
                </td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Mở modal thêm mới
    function openAddModal() {
        document.getElementById("addModal").style.display = "block";
        document.getElementById("addForm").reset();
    }

    // Mở modal sửa
    function editAssignment(index) {
        const assignment = assignments[index];
        document.getElementById("editIndex").value = index;
        document.getElementById("editTeacherId").value = assignment.teacherId;
        document.getElementById("editTeacherName").value = assignment.teacherName;
        document.getElementById("editCourseName").value = assignment.courseName;
        document.getElementById("editCourseId").value = assignment.courseId;
        document.getElementById("editCredits").value = assignment.credits;
        document.getElementById("editHours").value = assignment.hours;
        document.getElementById("editGroups").value = assignment.groups;
        document.getElementById("editSemester").value = assignment.semester;
        
        document.getElementById("editModal").style.display = "block";
    }

    // Mở modal xóa
    function openDeleteModal(index) {
        document.getElementById("deleteIndex").value = index;
        document.getElementById("deleteModal").style.display = "block";
    }

    // Xem chi tiết
    function viewAssignment(index) {
        const assignment = assignments[index];
        const viewDetails = document.getElementById("viewDetails");
        
        viewDetails.innerHTML = `
            <p><strong>Mã CB:</strong> ${assignment.teacherId}</p>
            <p><strong>Họ tên GV:</strong> ${assignment.teacherName}</p>
            <p><strong>Năm sinh:</strong> ${assignment.birthYear}</p>
            <p><strong>Chức danh, học vị:</strong> ${assignment.degree}</p>
            <p><strong>Tên học phần:</strong> ${assignment.courseName}</p>
            <p><strong>Mã học phần:</strong> ${assignment.courseId}</p>
            <p><strong>Số TC:</strong> ${assignment.credits}</p>
            <p><strong>Số tiết HP:</strong> ${assignment.hours}</p>
            <p><strong>Số lượng nhóm:</strong> ${assignment.groups}</p>
            <p><strong>Học kì:</strong> ${assignment.semester}</p>
            <p><strong>Tổng tiết GD:</strong> ${assignment.totalHours}</p>
            <p><strong>Bộ môn:</strong> ${assignment.department}</p>
        `;
        
        document.getElementById("viewModal").style.display = "block";
    }

    // Đóng modal
    function closeModal(modalId) {
        document.getElementById(modalId).style.display = "none";
    }

    // Xác nhận xóa
    function confirmDelete() {
        const index = document.getElementById("deleteIndex").value;
        assignments.splice(index, 1);
        closeModal("deleteModal");
        renderAssignments();
    }

    // Lưu phân công mới
    function saveNewAssignment() {
        const teacherId = document.getElementById("teacherId").value;
        const teacherName = document.getElementById("teacherName").value;
        const birthYear = parseInt(document.getElementById("birthYear").value);
        const degree = document.getElementById("degree").value;
        const courseName = document.getElementById("courseName").value;
        const courseId = document.getElementById("courseId").value;
        const credits = parseInt(document.getElementById("credits").value);
        const hours = parseInt(document.getElementById("hours").value);
        const groups = parseInt(document.getElementById("groups").value);
        const semester = document.getElementById("semester").value;
        const department = document.getElementById("department").value;
        
        // Tính tổng số tiết giảng dạy
        const totalHours = hours * groups;
        
        const newAssignment = {
            id: assignments.length + 1,
            teacherId,
            teacherName,
            birthYear,
            degree,
            courseName,
            courseId,
            credits,
            hours,
            groups,
            semester,
            totalHours,
            department
        };
        
        assignments.push(newAssignment);
        closeModal("addModal");
        renderAssignments();
    }

    // Lưu chỉnh sửa
    function saveEdit() {
        const index = document.getElementById("editIndex").value;
        const assignment = assignments[index];
        
        assignment.courseName = document.getElementById("editCourseName").value;
        assignment.courseId = document.getElementById("editCourseId").value;
        assignment.credits = parseInt(document.getElementById("editCredits").value);
        assignment.hours = parseInt(document.getElementById("editHours").value);
        assignment.groups = parseInt(document.getElementById("editGroups").value);
        assignment.semester = document.getElementById("editSemester").value;
        
        // Cập nhật tổng số tiết
        assignment.totalHours = assignment.hours * assignment.groups;
        
        closeModal("editModal");
        renderAssignments();
    }

    // Tìm kiếm phân công
    function searchAssignments() {
        const searchTerm = document.getElementById("searchInput").value.toLowerCase();
        
        if (!searchTerm) {
            renderAssignments();
            return;
        }
        
        const filteredAssignments = assignments.filter(assignment => 
            assignment.teacherId.toLowerCase().includes(searchTerm) || 
            assignment.teacherName.toLowerCase().includes(searchTerm) ||
            assignment.courseName.toLowerCase().includes(searchTerm) ||
            assignment.courseId.toLowerCase().includes(searchTerm)
        );
        
        renderAssignments(filteredAssignments);
    }

    // Lọc phân công
    function filterAssignments() {
        const semesterFilter = document.getElementById("semesterFilter").value;
        const departmentFilter = document.getElementById("departmentFilter").value;
        
        let filteredAssignments = assignments;
        
        if (semesterFilter) {
            filteredAssignments = filteredAssignments.filter(a => a.semester === semesterFilter);
        }
        
        if (departmentFilter) {
            filteredAssignments = filteredAssignments.filter(a => a.department === departmentFilter);
        }
        
        renderAssignments(filteredAssignments);
    }

    // Khởi tạo trang
    window.onload = function() {
        renderAssignments();
        
        // Thêm sự kiện Enter cho ô tìm kiếm
        document.getElementById("searchInput").addEventListener("keyup", function(event) {
            if (event.key === "Enter") {
                searchAssignments();
            }
        });
    };
</script>
</body>
       
