<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <title>Qu·∫£n l√Ω Ph√¢n c√¥ng Gi·∫£ng vi√™n</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 30px;
            background-color: #fffaf0;
            font-size: 20px;
        }

        .container {
            max-width: 1700px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        h1 {
            text-align: center;
            color: #e67e22;
        }

        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 30px auto;
            justify-content: center;
            max-width: 1200px;
        }

        .actions button {
            padding: 10px 20px;
            background-color: #e67e22;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 18px;
        }

        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 10;
        }

        .overlay.active {
            display: flex;
        }

        .form-box {
            background-color: #fff;
            padding: 20px;
            border-radius: 14px;
            width: 400px;
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.2);
            animation: popup 0.3s ease-out;
            position: relative;
            text-align: left;
        }

        .form-box h3 {
            margin-top: 0;
            margin-bottom: 15px;
            color: #d35400;
            font-size: 20px;
        }

        .form-box input,
        .form-box select {
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 8px;
            margin-bottom: 10px;
            width: 100%;
        }

        .form-box button {
            background: #e67e22;
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
        }

        .form-box button:hover {
            background-color: #cf5e0f;
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 50px;
            cursor: pointer;
        }

        .stat-box {
            width: 100%;
            max-width: 1200px;
            padding: 50px;
            border-radius: 14px;
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.2);
            margin: 0 auto;
        }

        .form-content {
            background-color: white;
            padding: 20px;
            border-radius: 14px;
            box-shadow: 0 6px 30px rgba(0, 0, 0, 0.2);
        }

        .form-content h2 {
            color: #e67e22;
            text-align: center;
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 30px;
            font-size: 14px;
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        th {
            background-color: #fdf0e3;
            color: #d35400;
        }
    </style>
</head>

<body>
    <div class="actions">
        <button onclick="openForm('add')">‚ûï Th√™m</button>
        <button onclick="openForm('edit')">‚úèÔ∏è S·ª≠a</button>
        <button onclick="openForm('delete')">üóëÔ∏è X√≥a</button>
        <button onclick="openForm('search')">üîç T√¨m ki·∫øm</button>
        <button onclick="openForm('stat')">üìä Th·ªëng k√™</button>
    </div>

    <div class="container">
        <h1>Ph√¢n c√¥ng gi·∫£ng vi√™n</h1>

        <!-- Overlay Forms -->
        <div id="overlay-add" class="overlay">
            <div class="form-box">
                <span class="close-btn" onclick="closeForm()">√ó</span>
                <h3>‚ûï Th√™m ph√¢n c√¥ng</h3>
                <form>
                    <label>M√£ CB:</label><input type="text">
                    <label>H·ªç t√™n GV:</label><input type="text">
                    <label>T√™n h·ªçc ph·∫ßn:</label><input type="text">
                    <label>M√£ h·ªçc ph·∫ßn:</label><input type="text">
                    <label>S·ªë TC:</label><input type="number">
                    <label>S·ªë ti·∫øt:</label><input type="number">
                    <label>H·ªçc k√¨:</label><input type="text">
                    <button type="submit">L∆∞u</button>
                </form>
            </div>
        </div>

        <div id="overlay-edit" class="overlay">
            <div class="form-box">
                <span class="close-btn" onclick="closeForm()">√ó</span>
                <h3>‚úèÔ∏è S·ª≠a ph√¢n c√¥ng</h3>
                <form>
                    <label>Nh·∫≠p M√£ CB c·∫ßn s·ª≠a:</label><input type="text">
                    <label>C·∫≠p nh·∫≠t ti·∫øt m·ªõi:</label><input type="number">
                    <button type="submit">C·∫≠p nh·∫≠t</button>
                </form>
            </div>
        </div>

        <div id="overlay-delete" class="overlay">
            <div class="form-box">
                <span class="close-btn" onclick="closeForm()">√ó</span>
                <h3>üóëÔ∏è X√≥a ph√¢n c√¥ng</h3>
                <form>
                    <label>M√£ CB ho·∫∑c T√™n GV:</label><input type="text">
                    <button type="submit">X√≥a</button>
                </form>
            </div>
        </div>

        <div id="overlay-search" class="overlay">
            <div class="form-box">
                <span class="close-btn" onclick="closeForm()">√ó</span>
                <h3>üîç T√¨m ki·∫øm</h3>
                <form>
                    <label>Nh·∫≠p t·ª´ kh√≥a:</label><input type="text">
                    <button type="submit">T√¨m</button>
                </form>
            </div>
        </div>

        <div class="overlay" id="overlay-stat">
            <div class="form-content">
                <span class="close-btn" onclick="closeForm()">√ó</span>
                <h2>üìä Th·ªëng k√™ gi·∫£ng vi√™n</h2>
                <div style="display: flex; justify-content: space-between;">
                    <div style="width: 100%; height: 300px;">
                        <canvas id="teachingChart"></canvas>
                    </div>
                    <div style="width: 100%; height: 300px;">
                        <canvas id="semesterChart"></canvas>
                    </div>
                    <div style="width: 100%; height: 300px;">
                        <canvas id="otherTaskChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- B·∫£ng d·ªØ li·ªáu -->
        <table>
            <thead>
                <tr>
                    <th>STT</th>
                    <th>M√£ CB</th>
                    <th>H·ªç v√† t√™n GV</th>
                    <th>NƒÉm sinh</th>
                    <th>Ch·ª©c danh, h·ªçc v·ªã</th>
                    <th>Ph√¢n c√¥ng gi·∫£ng d·∫°y</th>
                    <th>C√¥ng t√°c kh√°c</th>
                    <th>T·ªïng CLC (ƒë√£ t√≠nh CVHT CLC)</th>
                    <th>T·ªïng s·ªë ti·∫øt c√¥ng t√°c c·ªßa GV</th>
                    <th>T√™n h·ªçc ph·∫ßn</th>
                    <th>M√£ h·ªçc ph·∫ßn</th>
                    <th>S·ªë TC</th>
                    <th>S·ªë ti·∫øt c·ªßa HP</th>
                    <th>S·ªë l∆∞·ª£ng l·ªõp, nh√≥m</th>
                    <th>Gi·∫£ng d·∫°y ·ªü h·ªçc k√¨</th>
                    <th>T·ªïng s·ªë ti·∫øt gi·∫£ng d·∫°y c·ªßa GV</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1</td>
                    <td>GV01</td>
                    <td>Nguy·ªÖn VƒÉn A</td>
                    <td>1980</td>
                    <td>TS, Gi·∫£ng vi√™n ch√≠nh</td>
                    <td>CTDL & GT</td>
                    <td>C·ªë v·∫•n h·ªçc t·∫≠p</td>
                    <td>45</td>
                    <td>120</td>
                    <td>CTDL & GT</td>
                    <td>CS101</td>
                    <td>3</td>
                    <td>45</td>
                    <td>2</td>
                    <td>1</td>
                    <td>90</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>GV02</td>
                    <td>Tr·∫ßn Th·ªã B</td>
                    <td>1985</td>
                    <td>ThS, Gi·∫£ng vi√™n</td>
                    <td>OOP</td>
                    <td>Th∆∞ k√Ω khoa</td>
                    <td>30</td>
                    <td>100</td>
                    <td>OOP</td>
                    <td>CS102</td>
                    <td>3</td>
                    <td>45</td>
                    <td>2</td>
                    <td>2</td>
                    <td>90</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>GV03</td>
                    <td>L√™ VƒÉn C</td>
                    <td>1978</td>
                    <td>TS, Ph√≥ tr∆∞·ªüng khoa</td>
                    <td>Thi·∫øt k·∫ø web</td>
                    <td>Ch·ªß nhi·ªám b·ªô m√¥n</td>
                    <td>50</td>
                    <td>140</td>
                    <td>Web Design</td>
                    <td>CS103</td>
                    <td>3</td>
                    <td>45</td>
                    <td>2</td>
                    <td>1</td>
                    <td>90</td>
                </tr>
                <tr>
                    <td>4</td>
                    <td>GV04</td>
                    <td>Ph·∫°m Th·ªã D</td>
                    <td>1990</td>
                    <td>CN, Tr·ª£ gi·∫£ng</td>
                    <td>M·∫°ng m√°y t√≠nh</td>
                    <td></td>
                    <td>0</td>
                    <td>45</td>
                    <td>M·∫°ng m√°y t√≠nh</td>
                    <td>CS104</td>
                    <td>2</td>
                    <td>30</td>
                    <td>1</td>
                    <td>2</td>
                    <td>45</td>
                </tr>

            </tbody>
        </table>
    </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- TH√äM D√íNG N√ÄY -->

<script>
    function openForm(name) {
        // ƒê·∫ßu ti√™n, ·∫©n t·∫•t c·∫£ c√°c overlay kh√°c (n·∫øu c√≥ c√°i n√†o ƒëang m·ªü)
        document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none');

        // T√¨m overlay t∆∞∆°ng ·ª©ng
        const overlay = document.getElementById('overlay-' + name);
        if (overlay) {
            overlay.style.display = 'flex'; // Hi·ªÉn th·ªã overlay ƒë∆∞·ª£c ch·ªçn

            // N·∫øu l√† form th·ªëng k√™, v·∫Ω bi·ªÉu ƒë·ªì sau khi overlay hi·ªÉn th·ªã
            if (name === 'stat') {
                 console.log("ƒêang m·ªü overlay th·ªëng k√™, chu·∫©n b·ªã v·∫Ω bi·ªÉu ƒë·ªì...");
                 // TƒÉng th·ªùi gian ch·ªù l√™n m·ªôt ch√∫t (v√≠ d·ª•: 100ms)
                setTimeout(drawStatChart, 100);
            }
        }
    }

    function closeForm() {
        // ·∫®n t·∫•t c·∫£ c√°c overlay khi ƒë√≥ng
        document.querySelectorAll('.overlay').forEach(o => o.style.display = 'none');
         // T√πy ch·ªçn: H·ªßy c√°c bi·ªÉu ƒë·ªì khi ƒë√≥ng ƒë·ªÉ gi·∫£i ph√≥ng b·ªô nh·ªõ
         try {
            if (window.teachingChart instanceof Chart) window.teachingChart.destroy();
            if (window.semesterChart instanceof Chart) window.semesterChart.destroy();
            if (window.otherTaskChart instanceof Chart) window.otherTaskChart.destroy();
            console.log("ƒê√£ h·ªßy bi·ªÉu ƒë·ªì khi ƒë√≥ng form.");
         } catch(e) {
             console.error("L·ªói khi h·ªßy bi·ªÉu ƒë·ªì:", e);
         }
    }

    function drawStatChart() {
        console.log("B·∫Øt ƒë·∫ßu v·∫Ω bi·ªÉu ƒë·ªì...");

        const canvas1 = document.getElementById('teachingChart');
        const canvas2 = document.getElementById('semesterChart');
        const canvas3 = document.getElementById('otherTaskChart');

        // Ki·ªÉm tra xem canvas c√≥ t·ªìn t·∫°i kh√¥ng
        if (!canvas1 || !canvas2 || !canvas3) {
            console.error("L·ªói: Kh√¥ng t√¨m th·∫•y m·ªôt ho·∫∑c nhi·ªÅu th·∫ª canvas!");
            return;
        }

        const ctx1 = canvas1.getContext('2d');
        const ctx2 = canvas2.getContext('2d');
        const ctx3 = canvas3.getContext('2d');

        if (!ctx1 || !ctx2 || !ctx3) {
            console.error("L·ªói: Kh√¥ng th·ªÉ l·∫•y context 2D cho m·ªôt ho·∫∑c nhi·ªÅu canvas!");
            return;
        }
        console.log("ƒê√£ l·∫•y th√†nh c√¥ng canvas v√† context.");

        // D·ªØ li·ªáu m·∫´u (sau n√†y b·∫°n s·∫Ω l·∫•y t·ª´ server)
        const data = [
            { name: "Nguy·ªÖn VƒÉn A", tietDay: 90, tietKhac: 120, hk: "1" },
            { name: "Tr·∫ßn Th·ªã B", tietDay: 90, tietKhac: 100, hk: "2" },
            { name: "L√™ VƒÉn C", tietDay: 90, tietKhac: 140, hk: "1" },
            { name: "Ph·∫°m Th·ªã D", tietDay: 45, tietKhac: 45, hk: "2" }
        ];

        // X√≥a chart c≈© n·∫øu c√≥ (ki·ªÉm tra k·ªπ h∆°n)
        try {
            if (window.teachingChart instanceof Chart) {
                window.teachingChart.destroy();
                console.log("ƒê√£ h·ªßy teachingChart c≈©.");
            }
            if (window.semesterChart instanceof Chart) {
                window.semesterChart.destroy();
                console.log("ƒê√£ h·ªßy semesterChart c≈©.");
            }
            if (window.otherTaskChart instanceof Chart) {
                window.otherTaskChart.destroy();
                console.log("ƒê√£ h·ªßy otherTaskChart c≈©.");
            }
        } catch (e) {
            console.error("L·ªói khi h·ªßy bi·ªÉu ƒë·ªì c≈©:", e);
        }

        try {
            // Bi·ªÉu ƒë·ªì 1: S·ªë ti·∫øt gi·∫£ng d·∫°y
            console.log("ƒêang t·∫°o teachingChart...");
            window.teachingChart = new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: data.map(d => d.name),
                    datasets: [{
                        label: 'S·ªë ti·∫øt gi·∫£ng d·∫°y',
                        data: data.map(d => d.tietDay),
                        backgroundColor: '#4BC0C0'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false, // Cho ph√©p thay ƒë·ªïi t·ª∑ l·ªá
                    plugins: {
                        title: { display: true, text: 'S·ªë ti·∫øt gi·∫£ng d·∫°y theo gi·∫£ng vi√™n' }
                    }
                }
            });
            console.log("teachingChart ƒë√£ t·∫°o xong.");

            // Bi·ªÉu ƒë·ªì 2: Ph√¢n b·ªë h·ªçc k·ª≥
            console.log("ƒêang t·∫°o semesterChart...");
            const hocKyCount = data.reduce((acc, curr) => {
                acc[curr.hk] = (acc[curr.hk] || 0) + 1;
                return acc;
            }, {});
               window.semesterChart = new Chart(ctx2, {
                            type: 'doughnut',
                            data: {
                                labels: Object.keys(hocKyCount).map(k => `H·ªçc k·ª≥ ${k}`),
                                datasets: [{
                                    data: Object.values(hocKyCount),
                                    backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56']
                                }]
                            },
                            options: {
                                responsive: true,
                                plugins: {
                                    title: { display: true, text: 'Ph√¢n b·ªë gi·∫£ng d·∫°y theo h·ªçc k·ª≥' }
                                }
                            }
                        });
                        console.log("semesterChart ƒë√£ t·∫°o xong.");

                        // Bi·ªÉu ƒë·ªì 3: S·ªë ti·∫øt c√¥ng t√°c kh√°c
                        console.log("ƒêang t·∫°o otherTaskChart...");
                        window.otherTaskChart = new Chart(ctx3, {
                            type: 'bar',
                            data: {
                                labels: data.map(d => d.name),
                                datasets: [{
                                    label: 'S·ªë ti·∫øt c√¥ng t√°c kh√°c',
                                    data: data.map(d => d.tietKhac),
                                    backgroundColor: '#FF9F40'
                                }]
                            },
                            options: {
                                responsive: true,
                                maintainAspectRatio: false,
                                plugins: {
                                    title: { display: true, text: 'S·ªë ti·∫øt c√¥ng t√°c kh√°c theo gi·∫£ng vi√™n' }
                                }
                            }
                        });
                        console.log("otherTaskChart ƒë√£ t·∫°o xong.");

                    } catch (e) {
                        console.error("L·ªói khi t·∫°o bi·ªÉu ƒë·ªì:", e);
                    }
                }
            </script>

</body>

</html>


</body>
</html>



</body>

</html>